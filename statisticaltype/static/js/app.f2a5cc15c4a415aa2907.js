webpackJsonp([1],{"Dmz+":function(e,t){},Fioz:function(e,t){},K61J:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("keep-alive",[t("router-view")],1)],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},o,!1,function(e){a("K61J")},null,null).exports,i=a("/ocq"),l=a("Dd8w"),r=a.n(l),c=a("NYxO"),u=a("bOdI"),h=a.n(u),d={data:function(){return{pageData:{},isShow:!0,inputVal:""}},created:function(){var e=JSON.parse(localStorage.getItem("NOVA_total_searchVal"))||{},t=JSON.parse(localStorage.getItem("NOVA_total_searchLabel"))||{},a=localStorage.getItem("NOVA_total_searchText")||"",s=JSON.parse(localStorage.getItem("NOVA_total_exportSelect"))||{};this.$store.commit("saveData",{name:"searchVal",obj:e}),this.$store.commit("saveData",{name:"searchLabel",obj:t}),this.$store.commit("saveData",{name:"searchText",obj:a}),this.$store.commit("saveData",{name:"exportSelect",obj:s}),this.inputVal=a},computed:r()({},Object(c.c)(["searchVal","searchLabel","searchText","is_A_search","is_A_export","is_A_count","is_request_count","colorArr"]),Object(c.c)({selectArr:function(e){var t=this,a={},s=e.selectArr;return s.forEach(function(s){a[s.word]={"-1":!1,"-2":!1,"-3":!1},s.options&&s.options[1].options.forEach(function(o){t.arrIncludes(o.value,e.searchVal[s.word])?a[s.word][o.value]=!0:a[s.word][o.value]=!1})}),this.pageData=a,s}}),Object(c.b)(["isSearch","deleteType","changeSelect","isSearch","isChooseSelect","isChoose3"])),methods:{showAdvancedQuery:function(){this.$store.commit("saveData",{name:"isDialog",obj:!0})},checkboxChange:function(e,t,a,s){var o=this.pageData,n=this.selectArr[a].options[1].options,i=[],l=[],r=[];if("-1"===t){for(var c in o[e])o[e][c]=!0;for(var u=0;u<n.length;u++){var d=n[u];r.push({statistics_field_name:d.value,statistics_remark:d.label}),i.push(d.value),l.push(d.label)}}else if("-2"===t){for(var p in o[e])o[e][p]=!o[e][p];for(var m=0;m<n.length;m++){var v=n[m];(o[e][v.value]||v.is_default_select)&&(o[e][v.value]=!0,r.push({statistics_field_name:v.value,statistics_remark:v.label}),i.push(v.value),l.push(v.label))}this.pageData=o}else if("-3"===t)for(var b in o[e])o[e][b]=!1;else for(var f=0;f<n.length;f++){var _=n[f];(o[e][_.value]||_.is_default_select)&&(o[e][_.value]=!0,r.push({statistics_field_name:_.value,statistics_remark:_.label}),i.push(_.value),l.push(_.label))}this.$store.commit("assignData",{name:"exportSelect",obj:h()({},e,r)}),this.$store.commit("assignData",{name:"searchVal",obj:h()({},e,i)}),this.$store.commit("assignData",{name:"searchLabel",obj:h()({},e,l)});var g=this.changeSelect,y=this.isSearch,x=this.is_request_count;g&&!y&&(this.submit({isLoading:!1}),x&&this.$store.dispatch("A_count"))},input:function(e){this.$store.commit("saveData",{name:"searchText",obj:e})},submit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.operationType,a=void 0===t?"search":t,s=e.isLoading,o=void 0===s||s;this.$store.dispatch("search",{operationType:a,isLoading:o})},clickCount:function(){this.$store.dispatch("A_count")},reset:function(){this.$store.commit("saveData",{name:"searchVal",obj:{}}),this.$store.commit("saveData",{name:"searchLabel",obj:{}}),this.$store.commit("saveData",{name:"searchText",obj:""})},selectChange:function(e,t,a){var s=this.selectArr[a].options[1].options;if(this.arrIncludes(-1,t)){for(var o=[],n=[],i=[],l=0;l<s.length;l++){var r=s[l];i.push({statistics_field_name:r.value,statistics_remark:r.label}),o.push(r.value),n.push(r.label)}this.$store.commit("assignData",{name:"exportSelect",obj:h()({},e,i)}),this.$store.commit("assignData",{name:"searchVal",obj:h()({},e,o)}),this.$store.commit("assignData",{name:"searchLabel",obj:h()({},e,n)}),this.selectBlur(a)}else if(this.arrIncludes(-2,t)){for(var c=this.searchVal[e],u=[],d=[],p=[],m=0;m<s.length;m++){var v=s[m];this.arrIncludes(v.value,c)||(p.push({statistics_field_name:v.value,statistics_remark:v.label}),u.push(v.value),d.push(v.label))}this.$store.commit("assignData",{name:"exportSelect",obj:h()({},e,p)}),this.$store.commit("assignData",{name:"searchVal",obj:h()({},e,u)}),this.$store.commit("assignData",{name:"searchLabel",obj:h()({},e,d)}),this.selectBlur(a)}else if(this.arrIncludes(-3,t))this.$store.commit("assignData",{name:"exportSelect",obj:h()({},e,[])}),this.$store.commit("assignData",{name:"searchVal",obj:h()({},e,[])}),this.$store.commit("assignData",{name:"searchLabel",obj:h()({},e,[])}),this.selectBlur(a);else{for(var b=[],f=[],_=0;_<s.length;_++){var g=s[_];(this.arrIncludes(g.value,t)||g.is_default_select)&&(f.push({statistics_field_name:g.value,statistics_remark:g.label}),b.push(g.label))}this.$store.commit("assignData",{name:"exportSelect",obj:h()({},e,f)}),this.$store.commit("assignData",{name:"searchLabel",obj:h()({},e,b)})}var y=this.changeSelect,x=this.isSearch,w=this.is_request_count;y&&!x&&(this.submit({isLoading:!1}),w&&this.$store.dispatch("A_count"))},selectBlur:function(e){var t=this;setTimeout(function(){t.$refs.select[e].blur()},0)},arrIncludes:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!1,s=0;s<t.length;s++)t[s]===e&&(a=!0);return a}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse-transition",[a("div",{staticClass:"transitionBox",style:e.isShow?"":"min-height: 30px"},[a("div",{staticClass:"iBox",on:{click:function(t){e.isShow=!e.isShow}}},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"el-icon-arrow-up"}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.isShow,expression:"!isShow"}],staticClass:"el-icon-arrow-down"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"comBox"},[e._l(e.selectArr,function(t,s){return a("el-popover",{key:"searchBox_"+s,attrs:{placement:"bottom",width:"930"}},[e._l(t.options,function(o,n){return a("div",{key:o.label},[n?a("div",{staticClass:"checkboxBox"},e._l(o.options,function(o,n){return a("el-checkbox",{key:"options_"+n,staticClass:"comCheckbox",attrs:{size:"mini",label:o.label},on:{change:function(a){e.checkboxChange(t.word,o.value,s,a)}},model:{value:e.pageData[t.word][o.value],callback:function(a){e.$set(e.pageData[t.word],o.value,a)},expression:"pageData[item.word][val.value]"}})})):a("div",{staticClass:"checkboxBox",class:n?"":"checkboxBoxActive"},e._l(o.options,function(o,n){return a("el-checkbox-button",{key:"options_"+n,staticClass:"comCheckboxButton",attrs:{label:o.label},on:{change:function(a){e.checkboxChange(t.word,o.value,s,a)}},model:{value:e.pageData[t.word][o.value],callback:function(a){e.$set(e.pageData[t.word],o.value,a)},expression:"pageData[item.word][val.value]"}})}))])}),e._v(" "),a("div",{staticClass:"searchBox",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"searchName",style:"402888f371ba89940171ba901d1b0000"!==t.id&&"402888f371ba89940171ba91a3590001"!==t.id&&"402888f371ba89940171ba91f1660002"!==t.id&&"402888f371ba89940171ba94a9e80007"!==t.id&&t.id!==e.deleteType&&"asd"!==e.deleteType?"text-decoration: line-through;":""},[a("i",{staticClass:"el-icon-s-help",style:{color:e.colorArr[s%9]}}),e._v(e._s(t.name)+"：\n          ")]),e._v(" "),a("el-input",{attrs:{size:"mini","suffix-icon":"el-icon-arrow-down",placeholder:"请选择",value:e.searchLabel[t.word]?e.searchLabel[t.word].join("、"):""}})],1)],2)}),e._v(" "),a("div",{staticClass:"searchBox"},[a("div",{staticClass:"searchName"},[e._v("项目名称：")]),e._v(" "),a("el-input",{attrs:{size:"mini",placeholder:"多个查询空格分隔",disabled:!e.isChoose3},on:{input:e.input},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}})],1),e._v(" "),a("div",{staticClass:"searchBtnBox"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:!e.isSearch,disabled:!e.is_A_search||!e.isChooseSelect},on:{click:function(t){e.submit({operationType:"search"})}}},[e._v("\n          查询 "),a("i",{staticClass:"el-icon-search"})]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:!e.isSearch,disabled:!e.is_A_search||!e.isChooseSelect},on:{click:e.showAdvancedQuery}},[e._v("\n          高级查询 "),a("i",{staticClass:"el-icon-s-tools"})]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.reset}},[e._v("\n          重置 "),a("i",{staticClass:"el-icon-refresh"})]),e._v(" "),a("el-button",{attrs:{type:"warning",size:"mini",plain:"",disabled:!e.is_A_count||!e.isChooseSelect},on:{click:e.clickCount}},[e._v("\n          合计 "),e.is_A_count?a("i",{staticClass:"el-icon-s-data"}):a("i",{staticClass:"el-icon-loading"})]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini",plain:"",disabled:!e.isChooseSelect},on:{click:function(t){e.submit({operationType:"export"})}}},[e._v("\n          导出 "),e.is_A_export?a("i",{staticClass:"el-icon-download"}):a("i",{staticClass:"el-icon-loading"})])],1)],2)])])},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("kYk6"),a("g/WN")},"data-v-37d40b46",null).exports,v=a("d7EF"),b=a.n(v),f=a("fZjL"),_=a.n(f),g={created:function(){},data:function(){return{topBottomStyle:{},contentStyle:{},searchObj:{},countObj:{}}},computed:r()({},Object(c.c)(["pagenum","rownum","pageCount","countData","isLoading","colorArr"]),Object(c.c)({is_A_search:function(e){var t=this,a=0,s=setInterval(function(){if(t.$refs.table_1&&t.$refs.box){if(!t.contentStyle.height&&t.$refs.table_1.$el){var e=t.$refs.box.clientHeight-t.$refs.table_1.$el.clientHeight-26;t.contentStyle={height:e+"px"},clearInterval(s)}}else a>500&&clearInterval(s);a++},10);return t.$refs.table_2_box&&t.$refs.table_2&&t.$refs.table_2.$el&&setTimeout(function(){var e=t.$refs.table_2_box.clientWidth;t.topBottomStyle={width:e+"px"}},100),e.is_A_search}}),Object(c.b)(["tableData"]),{selectArr:function(){var e=this.$store.state.selectArr;return e.length?e:[]},searchLabel:function(){var e=this.$store.state.searchLabel||{};return _()(e)?e:{}}}),methods:{tableHeaderClick:function(e,t){var a=this;setTimeout(function(){a.$refs["input_"+e+"_"+t][0].focus()},100)},getSummaries:function(e){var t=this.countData,a=[];return e.columns.forEach(function(e,s){if(0===s)a.push("合计");else if(e.columnKey&&e.columnKey.length>6){var o=e.columnKey.split("^"),n=b()(o,4),i=n[2],l=n[3];t[i]?a.push(t[i][l]):a.push("")}else a.push("")}),a},clear:function(e){this.searchObj[e]=""},change:function(e,t,a){var s=h()({},e,t.trim());this.$store.commit("assignData2",{name:"searchHeader",obj:s,index:a}),this.$store.dispatch("A_getData")},clickCount:function(){this.$store.dispatch("A_count")},objectSpanMethod:function(e){var t=e.row,a=e.column;e.rowIndex;if(e.columnIndex<4||"string"==typeof a.columnKey&&"1"===a.columnKey.split("^")[1])return t.arrLength?{rowspan:t.arrLength,colspan:1}:{rowspan:0,colspan:0}},rowStyle:function(e){var t=e.row;e.rowIndex;if(t.index%2==1)return{background:"oldlace"}},cellStyle:function(e){e.row,e.column,e.rowIndex,e.columnIndex},headerStyle:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;if(t.columnKey)return{backgroundImage:"linear-gradient(rgba(255, 255, 255, .3) 0%, "+this.colorArr[parseInt(t.columnKey)%9]+" 80%)"}},arrIncludes:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!1,s=0;s<t.length;s++)t[s]===e&&(a=!0);return a}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"box",staticClass:"tableBox",attrs:{"element-loading-text":"请求数据中"}},[a("div",{staticClass:"tableBox2"},[a("el-table",{ref:"table_1",staticClass:"totalTable_1",style:e.topBottomStyle,attrs:{data:[],size:"mini",border:"","row-style":e.rowStyle,"cell-style":e.cellStyle,"header-cell-style":e.headerStyle,"span-method":e.objectSpanMethod}},[a("el-table-column",{attrs:{prop:"custom_name",label:"客户名称",resizable:!1,fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"dress_type_name",label:"服装品类",resizable:!1,fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"custom_dress_series_name",label:"系列名称",resizable:!1,fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"style_name",label:"款式名称",resizable:!1,fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"dh_item_name",label:"大货项目名称",resizable:!1,fixed:""}}),e._v(" "),e._l(e.selectArr,function(t,s){return a("div",{key:"_"+t.word},e._l(t.options[1].options,function(o,n){return e.arrIncludes(o.label,e.searchLabel[t.word])?a("div",{key:o.label},[a("el-table-column",{attrs:{label:o.label,"min-width":"100",resizable:!1,"column-key":s+"^"+t.columnKey+"^"+t.word+"^"+o.value},scopedSlots:e._u([{key:"header",fn:function(i){return[a("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[a("el-input",{ref:"input_"+s+"_"+n,refInFor:!0,attrs:{clearable:"",placeholder:"多个查询空格分隔"},on:{clear:function(t){e.clear(o.value)},change:function(a){e.change(o.value,a,t.word)}},model:{value:e.searchObj[o.value],callback:function(t){e.$set(e.searchObj,o.value,t)},expression:"searchObj[val.value]"}}),e._v(" "),a("div",{staticClass:"thText",class:e.searchObj[o.value]?"thActive":"",attrs:{slot:"reference"},on:{click:function(t){e.tableHeaderClick(s,n)}},slot:"reference"},[e._v("\n                  "+e._s(o.label)),a("span",[a("i",{staticClass:"el-icon-search"})])])],1)]}},{key:"default",fn:function(t){return[a("div",{staticClass:"ComTableCell"},[a("span",[e._v(e._s(t.row[o.value]))])])]}}])})],1):e._e()}))})],2),e._v(" "),a("div",{ref:"table_2_box",staticClass:"scrollBox_2",style:e.contentStyle},[a("el-table",{ref:"table_2",staticClass:"totalTable_2",attrs:{data:e.tableData,size:"mini",border:"","row-style":e.rowStyle,"cell-style":e.cellStyle,"header-cell-style":e.headerStyle,"span-method":e.objectSpanMethod}},[a("el-table-column",{attrs:{prop:"custom_name",label:"客户名称",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"dress_type_name",label:"服装品类",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"custom_dress_series_name",label:"系列名称",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"style_name",label:"款式名称",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"dh_item_name",label:"大货项目名称",fixed:""}}),e._v(" "),e._l(e.selectArr,function(t,s){return a("div",{key:t.word},e._l(t.options[1].options,function(o,n){return e.arrIncludes(o.label,e.searchLabel[t.word])?a("div",{key:o.label},[a("el-table-column",{attrs:{label:o.label,"min-width":"100","column-key":s+"^"+t.columnKey+"^"+t.word+"^"+o.value},scopedSlots:e._u([{key:"header",fn:function(i){return[a("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[a("el-input",{ref:"input_"+s+"_"+n,refInFor:!0,attrs:{clearable:"",placeholder:"多个查询空格分隔"},on:{clear:function(t){e.clear(o.value)},change:function(a){e.change(o.value,a,t.word)}},model:{value:e.searchObj[o.value],callback:function(t){e.$set(e.searchObj,o.value,t)},expression:"searchObj[val.value]"}}),e._v(" "),a("div",{staticClass:"thText",class:e.searchObj[o.value]?"thActive":"",attrs:{slot:"reference"},on:{click:function(t){e.tableHeaderClick(s,n)}},slot:"reference"},[e._v("\n                    "+e._s(o.label)),a("span",[e._v(" "),a("i",{staticClass:"el-icon-search"})])])],1)]}},{key:"default",fn:function(t){return[a("div",{staticClass:"ComTableCell"},[a("span",[e._v(e._s(t.row[o.value]))])])]}}])})],1):e._e()}))})],2)],1),e._v(" "),a("el-table",{ref:"table_3",staticClass:"totalTable_3",style:e.topBottomStyle,attrs:{data:e.tableData,size:"mini",border:"","show-summary":"","summary-method":e.getSummaries}},[a("el-table-column",{attrs:{prop:"custom_name",label:"客户名称",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"dress_type_name",label:"服装品类",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"custom_dress_series_name",label:"系列名称",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"style_name",label:"款式名称",fixed:""}}),e._v(" "),e._l(e.selectArr,function(t,s){return a("div",{key:t.word},e._l(t.options[1].options,function(o,n){return e.arrIncludes(o.label,e.searchLabel[t.word])?a("div",{key:o.label},[a("el-table-column",{attrs:{label:o.label,"min-width":"100","column-key":s+"^"+t.columnKey+"^"+t.word+"^"+o.value},scopedSlots:e._u([{key:"header",fn:function(i){return[a("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[a("el-input",{ref:"input_"+s+"_"+n,refInFor:!0,attrs:{clearable:"",placeholder:"多个查询空格分隔"},on:{clear:function(t){e.clear(o.value)},change:function(a){e.change(o.value,a,t.word)}},model:{value:e.searchObj[o.value],callback:function(t){e.$set(e.searchObj,o.value,t)},expression:"searchObj[val.value]"}}),e._v(" "),a("div",{staticClass:"thText",class:e.searchObj[o.value]?"thActive":"",attrs:{slot:"reference"},on:{click:function(t){e.tableHeaderClick(s,n)}},slot:"reference"},[e._v("\n                  "+e._s(o.label)),a("span",[e._v(" "),a("i",{staticClass:"el-icon-search"})])])],1)]}},{key:"default",fn:function(t){return[a("div",{staticClass:"ComTableCell"},[a("span",[e._v(e._s(t.row[o.value]))])])]}}])})],1):e._e()}))})],2),e._v(" "),a("span",{staticStyle:{display:"none"}},[e._v(e._s(e.is_A_search))])],1)])},staticRenderFns:[]};var x=a("VU/8")(g,y,!1,function(e){a("Fioz"),a("Olcp")},"data-v-48cf4fea",null).exports,w={data:function(){return{typeArr:[{label:"包含",value:"like"},{label:"不包含",value:"nlike"},{label:"等于",value:"eq"},{label:"不等于",value:"ne"},{label:"大于",value:"gt"},{label:"小于",value:"lt"},{label:"大于等于",value:"ge"},{label:"小于等于",value:"le"},{label:"空值",value:"n"},{label:"非空值",value:"nn"}],submitVal:[{typecode:"",indicatorcode:"",searchtype:"like",searchvalue:""}],styleObj:{}}},created:function(){var e=document.documentElement.clientHeight-430;this.styleObj={maxHeight:e+"px",overflowY:"auto"}},computed:r()({},Object(c.c)(["isDialog"]),Object(c.c)({selectObj:function(e){var t={};return e.selectArr.forEach(function(e){t[e.word]=e}),t}}),{selectObj2:function(){var e=this.selectObj,t={};return this.submitVal.forEach(function(a){var s=a.typecode,o=void 0===s?"":s;""!==o&&(t[o]=e[o].options[1].options)}),t},selectVal:function(){var e=this.selectObj,t={};return this.submitVal.forEach(function(a){var s=a.typecode,o=void 0===s?"":s,n=a.indicatorcode,i=void 0===n?"":n;if(""!==o&&""!==i){for(var l="1",r="",c=0;c<e[o].options[1].options.length;c++){var u=e[o].options[1].options[c];if(u.value===i){l=u.search_type,r=u.enum_value;break}}var h,d=[];h=null===l?"1":l,"2"===l&&(d=null===r?[]:r.split(",")),t[o+"^"+i]={type:h,arr:d}}}),t}}),methods:{selectChange:function(e){this.submitVal[e].indicatorcode="",this._proving()},_proving:function(){var e=[];this.submitVal.forEach(function(t){var a=t.typecode,s=t.indicatorcode,o=t.searchtype,n=t.searchvalue;a&&s&&o&&("n"===o||"nn"===o?(t.searchvalue="",n="",e.push({typecode:a,indicatorcode:s,searchtype:o,searchvalue:n})):n&&e.push({typecode:a,indicatorcode:s,searchtype:o,searchvalue:n}))}),this.$store.commit("saveData",{name:"advancedQuery",obj:e})},addData:function(){this.submitVal.push({typecode:"",indicatorcode:"",searchtype:"like",searchvalue:""})},deleteData:function(e){this.submitVal.splice(e,1),this._proving()},reset:function(){this.submitVal=[{typecode:"",indicatorcode:"",searchtype:"like",searchvalue:""}],this.$store.commit("saveData",{name:"advancedQuery",obj:[]})},search:function(){this._proving(),this.$store.dispatch("search",{operationType:"search",isLoading:!0}),this.$store.commit("saveData",{name:"isDialog",obj:!1})},handleClose:function(){this.$store.commit("saveData",{name:"isDialog",obj:!1})}}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"comDialog",attrs:{title:"高级查询",visible:e.isDialog,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.isDialog=t}}},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:e.addData}},[e._v("增加条件")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"comContentBox",style:e.styleObj},e._l(e.submitVal,function(t,s){return a("div",{key:"line_"+s,staticClass:"lineBox"},[a("el-select",{staticClass:"com_1",attrs:{size:"mini"},on:{change:function(t){e.selectChange(s)}},model:{value:e.submitVal[s].typecode,callback:function(t){e.$set(e.submitVal[s],"typecode",t)},expression:"submitVal[index].typecode"}},e._l(e.selectObj,function(e){return a("el-option",{key:"cate_"+e.id,attrs:{label:e.name,value:e.word}})})),e._v(" "),a("el-select",{staticClass:"com_2",attrs:{filterable:"",size:"mini"},on:{change:e._proving},model:{value:e.submitVal[s].indicatorcode,callback:function(t){e.$set(e.submitVal[s],"indicatorcode",t)},expression:"submitVal[index].indicatorcode"}},e._l(e.selectObj2[e.submitVal[s].typecode],function(e){return a("el-option",{key:"cate_2_"+e.id,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-select",{staticClass:"com_3",attrs:{size:"mini"},on:{change:e._proving},model:{value:e.submitVal[s].searchtype,callback:function(t){e.$set(e.submitVal[s],"searchtype",t)},expression:"submitVal[index].searchtype"}},e._l(e.typeArr,function(e){return a("el-option",{key:"type_"+e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),e.selectVal[e.submitVal[s].typecode+"^"+e.submitVal[s].indicatorcode]&&"1"===e.selectVal[e.submitVal[s].typecode+"^"+e.submitVal[s].indicatorcode].type?a("el-input",{staticClass:"com_4",attrs:{size:"mini",disabled:"n"===e.submitVal[s].searchtype||"nn"===e.submitVal[s].searchtype},on:{change:e._proving},model:{value:e.submitVal[s].searchvalue,callback:function(t){e.$set(e.submitVal[s],"searchvalue",t)},expression:"submitVal[index].searchvalue"}}):e._e(),e._v(" "),e.selectVal[e.submitVal[s].typecode+"^"+e.submitVal[s].indicatorcode]&&"2"===e.selectVal[e.submitVal[s].typecode+"^"+e.submitVal[s].indicatorcode].type?a("el-select",{staticClass:"com_4",attrs:{size:"mini"},on:{change:e._proving},model:{value:e.submitVal[s].searchvalue,callback:function(t){e.$set(e.submitVal[s],"searchvalue",t)},expression:"submitVal[index].searchvalue"}},e._l(e.selectVal[e.submitVal[s].typecode+"^"+e.submitVal[s].indicatorcode].arr,function(t){return a("el-option",{key:e.submitVal[s].typecode+"^"+e.submitVal[s].indicatorcode+"^"+t,attrs:{label:t,value:t}})})):e._e(),e._v(" "),a("el-button",{staticClass:"com_5",attrs:{size:"mini",icon:"el-icon-delete-solid"},on:{click:function(t){e.deleteData(s)}}})],1)})),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v("\n      重置查询条件 "),a("i",{staticClass:"el-icon-refresh"})]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.search}},[e._v("\n      查找 "),a("i",{staticClass:"el-icon-search"})])],1)],1)},staticRenderFns:[]};var C={components:{ComSearch:m,ComTable:x,ComAdvancedQuery:a("VU/8")(w,S,!1,function(e){a("tBsI"),a("XEH6")},"data-v-17f3298e",null).exports},data:function(){return{scrollTop:0}},created:function(){this.$store.dispatch("A_getCode")},computed:r()({},Object(c.c)(["tableSignArr","pagenum","rownum","pageCount"]),Object(c.b)(["tableSign"])),methods:{pageChange:function(e,t){this.$store.commit("saveData",{name:e,obj:t}),this.$store.dispatch("search",{operationType:"search",isLoading:!0})},pageScroll:function(e){var t=e.target.scrollTop,a=this.scrollTop;Math.abs(t-a)<300?(this.scrollTop=e.target.scrollTop,this.$refs.page.scrollTop=t):this.$refs.page.scrollTop=a},arrIncludes:function(e,t){for(var a=!1,s=0;s<t.length;s++)t[s]===e&&(a=!0);return a}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"page",staticClass:"pageBox",on:{scroll:e.pageScroll}},[a("com-search"),e._v(" "),e._l(e.tableSignArr,function(t,s){return s===e.tableSignArr.length-1?a("com-table",{key:"comTable_"+s,staticClass:"ComTable"}):e._e()}),e._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{staticClass:"comPagination",attrs:{"page-size":e.rownum,"page-sizes":[10,20,30,50,100],total:e.pageCount,"current-page":e.pagenum,layout:"prev, pager, next, total, jumper, sizes","prev-text":"上一页","next-text":"下一页"},on:{"size-change":function(t){e.pageChange("rownum",t)},"current-change":function(t){e.pageChange("pagenum",t)}}})],1),e._v(" "),a("p",{staticStyle:{display:"none"}},[e._v("\n    "+e._s(e.tableSign)+"\n    用于触发统计 tableSignArr\n  ")]),e._v(" "),a("com-advancedQuery")],2)},staticRenderFns:[]};var A=a("VU/8")(C,k,!1,function(e){a("Dmz+"),a("Vy32")},"data-v-09c92701",null).exports;s.default.use(i.a);var V=new i.a({routes:[{path:"/center",component:A,name:"信息中心"},{path:"/",component:A,name:""}]}),j=a("woOf"),D=a.n(j),$=a("mvHQ"),T=a.n($),O=a("mtWM"),I=a.n(O),L=a("mw3O"),z=a.n(L),B=a("zL8q"),E=a.n(B);I.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",I.a.interceptors.request.use(function(e){return e});var N=function(e){var t=void 0,a=e.path,s=void 0===a?"":a,o=e.path2,n=void 0===o?"":o,i=e.obj,l=void 0===i?{}:i,r=e.suc,c=void 0===r?function(e){}:r,u=e.err,h=void 0===u?function(e){}:u,d=e.method,p=void 0===d?"get":d,m=e.loading,v=void 0===m?"":m,b=l,f=s+n;if("get"===p){var _=[];for(var g in b)_.push(g+"="+b[g]);f+=_.length?f.indexOf("?")>-1?"&"+_.join("&"):"?"+_.join("&"):""}v&&(t=B.Loading.service({text:v})),I()({method:p,url:f,data:z.a.stringify(b),timeout:0}).then(function(e){c(e.data)}).catch(function(e){h(e),v&&t.close()})},H=window.location.origin+"/nova/",K={"指标":"statisticalTypeShowAction.ndo?action=getStatisticsIndicator","数据":"statisticalTypeShowAction.ndo?action=getCustomStatistics","合计":"statisticalTypeShowAction.ndo?action=getCustomStatisticsTotalQuantity","删除":"statisticalTypeShowAction.ndo?action=deleteStatisAccessories"},Q=function(e){e.path=H+K[e.name],N(e)},F={tableData:function(e){var t=this,a=e.dataList,s=e.searchVal,o=[];return a.forEach(function(e,a){var n=t.tableRow(e,s,a);n[0].arrLength=n.length,o=o.concat(n)}),o},tableRow:function(e,t,a){var s=this,o={custom_dress_series_name:e.custom_dress_series_name,custom_name:e.custom_name,dress_type_name:e.dress_type_name,style_name:e.style_name,index:a},n={},i=[],l=function(a){var l=t[a];if(null===e[a]);else if(e[a].length){s.forEachArr(e[a],l).forEach(function(e,t){i[t]||(i[t]={key:t}),i[t]=D()({},i[t],o,e)})}else l.forEach(function(t){n[t]=e[a][t]||""})};for(var r in t)l(r);if(_()(n).length){if(i.length){var c=[];return i.forEach(function(e,t){c.push(D()({},e,{key:t},n))}),c}return[D()({},n,o)]}return i.length?i:[o]},forEachArr:function(e,t){var a=[];return e.forEach(function(e){var s={},o=!1;t.forEach(function(t){s[t]=e[t]||"",e[t]&&(o=!0)}),o&&a.push(s)}),a},deleteType:function(e){var t=e.selectArr,a=e.searchLabel,s="asd";for(var o in a){if(a[o]&&a[o].length)for(var n=0;n<t.length;n++)if(t[n].word===o){var i=t[n].id;if("402888f371ba89940171ba901d1b0000"!==i&&"402888f371ba89940171ba91a3590001"!==i&&"402888f371ba89940171ba91f1660002"!==i&&"402888f371ba89940171ba94a9e80007"!==i){s=i;break}}if("asd"!==s)break}return s},changeSelect:function(e){var t=!1,a=e.searchVal,s=e.lastSearchVal,o=[],n=[];for(var i in a)a[i]&&a[i].length&&o.push(i);for(var l in s)s[l]&&s[l].length&&n.push(l);return o.sort().join(",")!==n.sort().join(",")&&(t=!0),t},changeInput:function(e){var t=!1;return e.searchText!==e.lastSearchText&&(t=!0),t},changeHeader:function(e){var t=!1,a=e.searchHeader;for(var s in a)if(a[s]){t=!0;break}return t},exportSelect:function(e){var t={};for(var a in e)e[a].length&&(t[a]=e[a]);return t},nameColor:function(e,t){var a=[];e.forEach(function(e){a.push(e.word)});var s=[];return t.forEach(function(e){s.push(e.slice(1))}),{name:a,color:s}},isChooseSelect:function(e){var t=this.exportSelect(e.exportSelect);return!!_()(t).length},isChoose3:function(e){var t=this.exportSelect(e.exportSelect),a=!1;for(var s in t)if("dh_relate"===s||"kf_relate"===s||"sj_relate"===s||"customerorder_info"===s){a=!0;break}return a}},R=F;s.default.use(c.a);var q=new c.a.Store({modules:{},state:{colorArr:["#ff0000","#ffc000","#92d050","#00b0f0","#8064a2","#76933c","#e26b0a","#558ed5","#963634"],dataList:[],tableSignArr:[],lastSearchVal:{},lastSearchText:"",selectArr:[],searchVal:{dh_relate:["dh_item_name"]},searchLabel:{dh_relate:["项目名称"]},searchText:"",searchHeader:{},isDialog:!1,advancedQuery:[],isLoading:!1,countData:{},exportSelect:{dh_relate:[{statistics_field_name:"dh_item_name",statistics_remark:"项目名称"}]},pagenum:1,rownum:10,pageCount:0,is_A_search:!0,is_A_export:!0,is_A_count:!0,is_request_count:!1},getters:{tableData:function(e){return R.tableData(e)},deleteType:function(e){return R.deleteType(e)},isChooseSelect:function(e){return R.isChooseSelect(e)},isChoose3:function(e){return R.isChoose3(e)},isSearch:function(e,t){return t.changeInput||t.changeHeader||!t.tableData.length},changeSelect:function(e){return R.changeSelect(e)},changeInput:function(e){return R.changeInput(e)},changeHeader:function(e){return R.changeHeader(e)},tableSign:function(e){var t=T()(e.searchLabel);return e.tableSignArr.push(t),t}},mutations:{saveData:function(e,t){var a=t.name,s=t.obj;e[a]=s},assignData:function(e,t){var a=t.name,s=t.obj,o=e[a]||{};e[a]=D()({},o,s)},assignData2:function(e,t){var a=t.name,s=t.obj,o=t.index,n=e[a]||{};n[o]=D()({},n[o],s),e[a]=D()({},n)}},actions:{A_getCode:function(e){var t=e.state,a=e.dispatch,s=B.Loading.service({text:"正在获取指标"});a("A_exportDelete");Q({name:"指标",obj:{},suc:function(e){s.close();var a=[];e.forEach(function(e){var t=e.type_name,s=e.type_code,o=e.statistical_type_id,n=e.indicatorlist,i=0;"dh_relate"!==s&&"kf_relate"!==s&&"sj_relate"!==s||(i=1);var l={name:t,word:s,id:o,columnKey:""+i},r=[{label:" ",options:[{value:"-1",label:"全选"},{value:"-2",label:"反选"},{value:"-3",label:"全不选"}]}],c=[];n.forEach(function(e){var t=e.indicator_code,a=e.indicator_name,s=e.statistical_indicator_id,o=e.is_default_select,n=e.search_type,i=e.enum_value;c.push({value:t,label:a,id:s,is_default_select:o,search_type:n,enum_value:i})}),r.push({label:"",options:c}),l.options=r,a.push(l)}),t.selectArr=a}})},A_getData:function(e){var t=e.state,a=e.dispatch,s=e.getters,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.operationType,i=void 0===n?"search":n,l=o.isLoading,r=void 0!==l&&l,c={search:"is_A_search",export:"is_A_export"};if(!0===t[c[i]]&&!0===s.isChooseSelect){t[c[i]]=!1,a("A_exportDelete"),t.isLoading=r;var u=t.pagenum,h=t.rownum,d=t.searchText,p=t.searchHeader,m=t.exportSelect,v=t.selectArr,b=t.colorArr,f=t.advancedQuery,_=T()(R.exportSelect(m)),g=T()(R.nameColor(v,b)),y=d.trim(),x=T()(p),w=T()(f),S={operationType:i,statisticsIndexNum:g,columncondition:_,pagenum:u,rownum:h,itemname:y,searchcontent:x,advancedQuery:w};if("search"===i){Q({name:"数据",obj:S,suc:function(e){t[c[i]]=!0,t.isLoading=!1;var a=e.datalist,s=e.datanum,o=void 0===s?0:s;t.pageCount=o,t.dataList=null===a?[]:a,t.countData={}},method:"post"})}else if("export"===i){Q({name:"数据",obj:S,suc:function(e){t[c[i]]=!0,t.isLoading=!1,localStorage.setItem("NOVA_total_export_path",e.data);var a=window.location.origin+"/nova",s=document.createElement("a");s.href=a+e.data,s.download="自定义统计",s.click()},method:"post"})}}},A_count:function(e){var t=e.state,a=e.dispatch,s=e.getters;if(!0===t.is_A_count&&!0===s.isChooseSelect){t.is_A_count=!1,a("A_exportDelete");var o=t.pagenum,n=t.rownum,i=t.searchText,l=t.searchHeader,r=t.exportSelect,c=t.advancedQuery,u=T()(R.exportSelect(r)),h=T()(l),d=i.trim(),p=T()(c);Q({name:"合计",obj:{columncondition:u,pagenum:o,rownum:n,itemname:d,searchcontent:h,advancedQuery:p},suc:function(e){t.is_A_count=!0,t.is_request_count=!0,t.countData=e},method:"post"})}},A_exportDelete:function(e){e.state;var t=localStorage.getItem("NOVA_total_export_path")||"";if(t.length){var a={filePath:encodeURI(t)};Q({name:"删除",obj:a,suc:function(e){localStorage.removeItem("NOVA_total_export_path")}})}},search:function(e){var t=e.state,a=e.dispatch,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.operationType,n=s.isLoading,i=t.searchVal,l=t.searchLabel,r=t.searchText,c=t.exportSelect;t.lastSearchVal=D()({},i),t.lastSearchText=r,localStorage.setItem("NOVA_total_searchVal",T()(i)),localStorage.setItem("NOVA_total_searchLabel",T()(l)),localStorage.setItem("NOVA_total_searchText",r),localStorage.setItem("NOVA_total_exportSelect",T()(c)),a("A_getData",{operationType:o,isLoading:n})}}}),U=(a("tvR6"),a("hKoQ"));a.n(U).a.polyfill(),s.default.use(E.a),new s.default({el:"#app",store:q,router:V,components:{App:n},template:"<App/>"})},Olcp:function(e,t){},Vy32:function(e,t){},XEH6:function(e,t){},"g/WN":function(e,t){},kYk6:function(e,t){},tBsI:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f2a5cc15c4a415aa2907.js.map